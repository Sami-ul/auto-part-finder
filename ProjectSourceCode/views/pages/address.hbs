<main class="py-4 mx-5">
    <div class="form w-50 m-auto mt-5">
        {{> message}}
        <form>
            <h3>Autofill Address</h3>
            <div class="form-floating mb-2 position-relative">
                <input name="address" type="text" class="form-control" id="address" placeholder="address">
                <label for="address">Address</label>
                <div id="search-results" style="position: absolute; width: 100%; background: white; border: 1px solid #ccc; max-height: 200px; overflow-y: auto; display: none; z-index: 1000;"></div>
            </div>
        </form>
        <div id="map"></div>

        <form action="/address" method="POST">
            <h3>Address Details</h3>
            <div class="form-floating mb-2 position-relative">
                <input name="street_address" type="text" class="form-control" id="street_address" placeholder="Street Address" required>
                <label for="street_address">Street Address</label>
            </div>

            <div class="form-floating mb-2 position-relative">
                <input name="apartment" type="text" class="form-control" id="apartment" placeholder="Apt, Suite, Unit (Optional)">
                <label for="apartment">Apt, Suite, Unit (Optional)</label>
            </div>

            <div class="form-floating mb-2 position-relative">
                <input name="city" type="text" class="form-control" id="city" placeholder="City" required>
                <label for="city">City</label>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-floating mb-2 position-relative">
                        <select name="state" class="form-select" id="state" placeholder="State" required>
                            <option value="" selected disabled>Select state</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                        <label for="state">State</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating mb-2 position-relative">
                        <input name="postal_code" type="text" class="form-control" id="postal_code" placeholder="ZIP Code" required>
                        <label for="postal_code">ZIP Code</label>
                    </div>
                </div>
            </div>

            <div class="form-floating mb-2 position-relative">
                <select name="country" class="form-select" id="country" placeholder="Country" required>
                    <option value="US" selected>United States</option>
                </select>
                <label for="country">Country</label>
            </div>

            <div class="form-check mb-3">
                <input name="default_address" class="form-check-input" type="checkbox" id="default_address" 
                    {{#if this.needsDefault}}checked disabled{{/if}}>
                <label class="form-check-label" for="default_address">
                    {{#if this.needsDefault}}
                        This is your default address
                    {{else}}
                        Make this my default address
                    {{/if}}
                </label>
            </div>

            <div class="d-grid">
                <button type="submit" class="btn btn-primary">Save Address</button>
            </div>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    <script src="./js/address_suggestions.js"></script>
        
</main>